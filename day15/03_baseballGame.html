<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 1. ì›¹í°íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° -->
    <link rel="stylesheet" crossorigin
            href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap">

    <!-- 2. í°íŠ¸ ì„¸íŒ…ìš© CSS (01_fonts.css) -->
    <link rel="stylesheet" href="font.css">


    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }


        body{
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

       

        button, input{
            background: none;
            height: 33px;
            padding: 0 10px;
            border: 2px solid black;
            border-radius: 30px;
            text-align: center;
        }
        
        button{
            cursor: pointer;
            font-weight: 700;
        }

        button:hover{
            background-color: black;
            color: white;
            transition: ease-in-out 0.1s;
        }
        


        h1{
            text-align: center;
            font-size: clamp(32px, 6vw, 60px);
            margin-bottom: 10px;
        }

        h2{
            margin-bottom: 20px;
        }
       

        .controllerBox{
            margin: 10px;
        }


        .outerBox{
            display: flex;
            align-items:flex-start;
            gap: 20px;
            margin-top: 20px;
        }

        .playerBox, .playerLog{
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 1px 1px 5px rgba(0,0,0,0.2);
            padding: 20px;
            /* margin-bottom: 20px; */
        }


        h3{
            /* border-bottom: 1px solid black; */
            /* margin: 20px 0; */
        }

    </style>




</head>
<body>
    <h1 id="header">ğŸŸï¸ BASEBALL GAME âš¾ï¸</h1>
    <h2 id="comMsg">PLAY ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”...</h2>
    <div class="controllerBox">
        <button id="startBtn">PLAY</button>
        <button id="reloadBtn">RESTART</button>
    </div>
    <div class="outerBox">
        <div class="playerBox">
            <h3>YOUR NUMBER âš¾ï¸</h3>
            <div class="inner">
                <input type="text" id="myNum">
                <button id="tryBtn">TRY</button>
            </div>
        </div>
        <div class="playerLog">
            <h3>-------------------- PLAYER LOG --------------------</h3>
            <ol id="tries"></ol>
        </div>
    </div>






    <script>
        /*
            1. ê²Œì„ ì‹œì‘ ì „ ì…ë ¥ê¸ˆì§€
            2. ì¤‘ë³µê°’ X
            3. ë°˜ë“œì‹œ 3ìë¦¬
            4. ë¬¸ì X
        */

        // comNum ë°°ì—´ê³¼, ì‚¬ìš©ì value ê°’ì˜ ë°°ì—´ ë¹„êµ
        // ê°’ ìœ„ì¹˜ê°€ ë™ì¼í•˜ë‹¤ë©´ strike, ê°’ë§Œ ë™ì¼í•˜ë©´ ball
        // ì¼ì¹˜í•˜ëŠ” ê°’ì´ ì—†ë‹¤ë©´ out

        const startBtnEl = document.getElementById('startBtn');
        const reloadBtnEl = document.getElementById('reloadBtn');
        const tryBtnEl = document.getElementById('tryBtn');
        const inputEl = document.getElementById('myNum');
        const triesEl = document.getElementById('tries');
        const comMsgEl = document.getElementById('comMsg');

        let comNum = [];
        const result=[];
        let strike = 0;
        let ball = 0;
        let out =0;


        // -------------------- PLAY BUTTON -------------------- 

        startBtnEl.addEventListener('click',()=>{
            const comNumSet = new Set();
    
            while(comNumSet.size<3){
                comNumSet.add(Math.floor(Math.random()*10));
            }
    
            // set > ë°°ì—´ ì „í™˜
            comNum = [...comNumSet]; 
            console.log('comNum: '+comNum);
            

            comMsgEl.innerText = 'ì»´í“¨í„°ê°€ ê³µì„ ë˜ì¡ŒìŠµë‹ˆë‹¤. ìˆ«ìë¥¼ ë§ì¶°ë³´ì„¸ìš”!';
        });

        // -------------------- TRY BUTTON -------------------- 

        tryBtnEl.addEventListener('click', ()=>{
            if(comNum.length !== 3){
                alert('ë¨¼ì € ê²Œì„ ì‹œì‘ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!');
                return;
            }

            const userInput = inputEl.value; // trim()?


            // 3ê¸€ì ì œí•œ, ì •ìˆ˜ë§Œ
            if(userInput.length!=3 || isNaN(userInput)){
                alert('0~9 ì‚¬ì´ì˜ 3ê°œì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            const userNumArr = userInput.split('').map(Number);

            // ì‚¬ìš©ì ìˆ«ì ì¤‘ë³µ ë°©ì§€
            if(new Set(userNumArr).size !== 3){
                alert('ì¤‘ë³µëœ ê°’ì„ ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }



            console.log('userInput: '+userInput);
            console.log('userNumArr: '+userNumArr);
            playGame(userNumArr);
            let str =''
             

            if(strike ===3){
                str+= `<li>${userInput} : ğŸ‰ğŸ‰ğŸ‰ 3 STRIKE! ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!ğŸ™ŒğŸ†</li>`;
            } else if(out ===3){
                str+= `<li>${userInput} : 3 OUT! GAME OVERğŸ’€</li>`;
            } else{
                str+=`<li>${userInput} : ${strike} Strikes ${ball} Ball ${out} Out</li>`;
            }

            comMsgEl.innerText = 'PLAY ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒ ê³µì„ ë§ì¶°ë³´ì„¸ìš”!';

            triesEl.innerHTML += str;

            // ì´ˆê¸°í™”
            strike=0;
            ball=0;
            out=0;
            comNum = [];
            inputEl.value = "";
            inputEl.focus();
        });


        function playGame(userNumArr){
            for(let i = 0; i<comNum.length;i++){
                if(comNum.includes(userNumArr[i])){
                    if(comNum[i]==userNumArr[i]){
                        result[i]='strike';
                        strike++;
                    }else{
                        result[i]='ball';
                        ball++;
                    }
                }else{
                    result[i] = 'out'
                    out++;
                }
            }
            console.log(result);
        }


        // -------------------- RESTART BUTTON --------------------

        reloadBtnEl.addEventListener('click', ()=>{
            location.reload();
        })




    </script>
</body>
</html>