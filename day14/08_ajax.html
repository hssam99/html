<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>AJAX</h1>
    <!-- 
        비동기 통신 (asynchronous communication) : ajax

        - 데이터 통신 방식 : 동기, 비동기

        동기방식(synchronous) : 요청을 보내고 응답이 올 때까지 기다림
        - 요청을 하면 html 페이지로 리턴
        <form action="""></form>

        비동기방식(asynchronous) : 요청을 보내고 응답이 오지 않아도 다른 작업을 계속 수행함
        - 요청을 하면 데이터만 리턴
        - 요청에 대한 응답이 객체로 리턴
        - 작업의 복잡성이 증가할 수 있다.
        - 자원의 활용성이 효율적임

        - 동기방식 : 직관적, 설계가 간단하다.
        - 결과가 주어지기 전까지 아무것도 못하고 대기해야하는 단점이 있음

        - 비동기방식 : 자원의 활용성이 좋음, 사용자 경험 향상
        - 설계가 복잡해지고, 직관적이지 않음

        비동기방식: ajax, jquery, fetch api, axios

        async / await : 비동기 통신 키워드

        async function : 함수 선언 앞에 붙이는 키워드
        그 함수의 리턴 객체는 promise 객체로 리턴됨.

        await : 순차코드 실행 시 지연로딩, 지연 실행 상황이 발생하면 코드를 순차 진행할 수 있게 보증하는 키워드

        http://jsonplaceholder.typicode.com/
    -->

    <button id="btn">데이터불러오기</button>
    <ul id="ul"></ul>

    <script>
        document.getElementById('btn').addEventListener('click', ()=>{
            // const r = asyncFunc();
            // console.log(r);
            // asyncFunc();

            asyncFunc().then(data =>{
                printData(data);
            });
        });

        function printData(obj){
            const ul = document.getElementById('ul');
            let str = '';
            for(let key in obj){
                str += `<li>${key} : ${obj[key]}</li>`;
            }
            ul.innerHTML=str;
        }

        async function asyncFunc(){
            try {
                const resp = await fetch('https://jsonplaceholder.typicode.com/todos/1'); // response 응답객체
                // console.log(resp.json());
                const result = await resp.json();
                console.log(result);
                return result;
            } catch (error) {
                console.log(error);
            }
        }
    </script>
</body>
</html>