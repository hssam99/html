<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

        <!-- 1. 웹폰트 불러오기 -->
    <link rel="stylesheet" crossorigin
            href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap">

    <!-- 2. 폰트 세팅용 CSS (01_fonts.css) -->
    <link rel="stylesheet" href="font.css">

    <style>






    </style>
</head>
<body>
    <h1>set을 이용한 로또 만들기</h1>
    <!--
        1~45까지 숫자 중복없이 6개 뽑기 => 출력
        set을 이용
    -->

    <button id="makeMyLotto">랜덤번호 6자리 생성</button>
    <h1 id="printMyLotto">로또번호 출력</h1>

    <button id="makeWinningLotto">당첨번호 7자리 생성(출력)</button>
        <h1 id="printWinningLotto">로또번호 출력</h1>

    <button id="ranking">당첨확인</button>
    <h3 id="printResult">당첨여부 출력</h3>

    <script>
        const myLotto = [];
        const winningLotto = [];

        function getLottoNumbers(arr, count){
            const lottoSet = new Set();
            while(lottoSet.size < count){
                let num = Math.floor(Math.random()*10)+1;
                lottoSet.add(num);
            }

            lottoSet.forEach((v)=> arr.push(v));
        }

        document.getElementById('makeMyLotto').addEventListener('click', function(){
            myLotto.length = 0;
            getLottoNumbers(myLotto, 6);
            let lottoString = '';
            myLotto.forEach((v)=> lottoString += v+' ')
            
            document.getElementById('printMyLotto').innerText = '내 로또 번호 : '+lottoString;
            console.log(myLotto);
        });

        document.getElementById('makeWinningLotto').addEventListener('click', function(){
            winningLotto.length = 0; // set이면 clear() 메서드 사용
            getLottoNumbers(winningLotto, 7);
            let lottoString = '';
            winningLotto.forEach((v)=> lottoString += v+' ');
            console.log(winningLotto);

            document.getElementById('printWinningLotto').innerText = '당첨 로또 번호 : '+ winningLotto.slice(0,6).join('-') + ' ['+ winningLotto[6] +']';
        });

        document.getElementById('ranking').addEventListener('click', function(){
            let matchcnt = 0;
            let matchbonus = false;

            const winningLottoWithoutBonus = winningLotto.slice(0,6);
            const bonusNumber = winningLotto[6];

            // console.log('winningLottoWithoutBonus: '+winningLottoWithoutBonus);

            // 일치하는 번호 개수 확인 (6개 번호만 )
            myLotto.forEach(v=>{
                if(winningLottoWithoutBonus.includes(v)){
                    matchcnt++;
                }
            })

            // 보너스 번호 확인
            if(myLotto.includes(bonusNumber)) {
                matchbonus = true;
            }

            // console.log('matchcnt: '+matchcnt);

            let resultText = '';
            switch (matchcnt) {
                case 6: resultText = '1등 당첨!'; break;
                case 5: resultText = matchbonus ? '2등 당첨!' : '3등 당첨!'; break;
                case 4: resultText = '4등 당첨!'; break;
                case 3: resultText = '5등 당첨!'; break;
                default: resultText = '꽝! 다음 기회에!'; break;
            }

            document.getElementById('printResult').innerText = resultText;
        });


        

    </script>
    
</body>
</html>